@if (isOpen()) {
<!-- Modal Backdrop -->
<div class="modal-backdrop fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm"
    (click)="onBackdropClick($event)" (keydown.escape)="onClose()">

    <!-- Modal Content -->
    <div
        class="relative w-full max-w-2xl bg-white rounded-2xl shadow-2xl transform transition-all duration-300 animate-in fade-in zoom-in-95">

        <!-- Header -->
        <div class="flex items-center justify-between p-6 border-b border-slate-200">
            <div class="flex items-center gap-3">
                <div
                    class="w-10 h-10 bg-gradient-to-br from-violet-600 to-indigo-600 rounded-xl flex items-center justify-center">
                    <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M12 4v16m8-8H4"></path>
                    </svg>
                </div>
                <div>
                    <h2 class="text-xl font-bold text-slate-900">New Project</h2>
                    <p class="text-sm text-slate-500">Import your TikTok script</p>
                </div>
            </div>
            <button (click)="onClose()" [disabled]="isCreating()"
                class="p-2 rounded-lg text-slate-400 hover:text-slate-600 hover:bg-slate-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12">
                    </path>
                </svg>
            </button>
        </div>

        <!-- Body -->
        <div class="p-6">
            <!-- Script Content -->
            <div class="space-y-2">
                <label class="block text-sm font-medium text-slate-700">
                    Script Content
                </label>
                <textarea [(ngModel)]="scriptContent" rows="16" [disabled]="isCreating()"
                    class="w-full px-4 py-3 border border-slate-300 rounded-xl text-slate-900 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-transparent resize-none transition-all font-mono text-sm disabled:bg-slate-50 disabled:cursor-not-allowed"
                    placeholder="## ðŸŽ¯ Hook

Come fa Shazam a riconoscere una canzone in 3 secondi?

## ðŸŽ¬ Script

Shazam non ascolta tutta la canzone, cerca solo le impronte digitali.

Ogni canzone ha un pattern unico, come le tue impronte digitali.

L'app confronta questi pattern con un database gigante.

Seguimi per altre curiositÃ  tech!"></textarea>

                <p class="text-xs text-slate-500">
                    Paste the script generated by the LLM (with Hook, Script sections, and CTA).
                </p>
            </div>
        </div>

        <!-- Footer -->
        <div class="flex items-center justify-end gap-3 p-6 border-t border-slate-200 bg-slate-50 rounded-b-2xl">
            <button (click)="onClose()" [disabled]="isCreating()"
                class="px-5 py-2.5 text-sm font-medium text-slate-700 bg-white border border-slate-300 rounded-xl hover:bg-slate-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                Cancel
            </button>
            <button (click)="onCreate()" [disabled]="!scriptContent().trim() || isCreating()"
                class="px-6 py-2.5 text-sm font-semibold text-white bg-gradient-to-r from-violet-600 to-indigo-600 rounded-xl shadow-lg shadow-violet-500/30 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed hover:from-violet-700 hover:to-indigo-700">
                @if (isCreating()) {
                <div class="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div>
                <span>Creating...</span>
                } @else {
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M5 13l4 4L19 7"></path>
                </svg>
                <span>Create Project</span>
                }
            </button>
        </div>
    </div>
</div>
}
